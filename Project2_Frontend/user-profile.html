<!DOCTYPE html>
<html lang="en">
<head>
    <title>User Profile</title>
    <!--navigation top style sheet-->
	<link rel="stylesheet" href="navigation-top.css">
	<!--navigation to sidebar style sheet-->
	<link rel="stylesheet" href="sidebar-nav.css">
</head>
<body>
    <!--navigation top-->
	<div class="topnav" id="myTopnav">
	    <a id="home-page" class="glossymenu" href="bankWelcomePage.html"> WELCOME :::</a>
		<a id="profile-page" class="glossymenu" href="user-profile.html">::: USER PROFILE :::</a>
		<a id="loan-page" class="glossymenu" href="proj2Login.html"> ::: AUTO LOAN :::</a>
		<a id="credit-page" class="glossymenu" href="http://1"> ::: CREDIT CARD :::</a>
		<a id="about-page" class="glossymenu" href="#"onClick="window.open('http://','WindowA','width=400,height=600,scrullbars=no');">::: ABOUT US :::</a>
		<a id="investor-page" class="glossymenu" href="http://w">::: INVESTOR :::</a>
		<a id="special-offer-page" class="glossymenu" href="http://www.">::: OUR SPECIAL OFFER :::</a>
  		<a id="login-page" class="glossymenu" href="proj2Login.html">::: LOGIN / SIGNUP</a></div>
    </div>
	<!--end of navigation top-->

	<h1 id="mainbody"></h1>

	<!--side navigation-->
	<div id="mySidenav" class="sidenav">
		<a id="profile-home" href="user-profile.html">Profile Home</a>
		<a id="request-page" href="request-page.html">Make a Request (Credit, Loan, Job)</a>
	</div>
	<!--end of side navigation-->

	<table>
		<tbody id="userProfile">

		</tbody>
	</table>
    
</body>
<script>
window.onload = getUser();
let name = sessionStorage.getItem('first_name');
document.getElementById("mainbody").innerHTML = "Welcome" + " " + name + ", to your profile"

async function getUser() {
    console.log("Getting Accounts")
    const httpResponse = await fetch("http://127.0.0.1:5000/account/<userid>")
    console.log(httpResponse)

    const body = await httpResponse.json()
    
    let result = []
    for(var i in body){
        result.push(body[i])
    }

    function drawTable(tbody) {
        var tbody = document.getElementById("userProfile");
        var accounts = new Array();
        accounts[0] = {acct_id: null, user_id: null, account_type: null, account_balance: null};
        var headerNames = Object.getOwnPropertyNames(accounts[0]);
        var columnCount = headerNames.length;
        var row = tbody.insertRow(-1);
        for (var i = 0; i < columnCount; i++) {
            var headerCell = document.createElement("TH");
            headerCell.innerHTML = headerNames[i];
            row.appendChild(headerCell);
        }
        
        var tr, td;
    
    for (var i = 0; i < result.length; i++) {
        tr = tbody.insertRow(tbody.rows.length);
        td = tr.insertCell(tr.cells.length);
        td.setAttribute("align", "center");

        td.innerHTML = result[i].acct_id;
        td = tr.insertCell(tr.cells.length);
        td.innerHTML = result[i].user_id;
        td = tr.insertCell(tr.cells.length);
        td.innerHTML = result[i].account_type;
        td = tr.insertCell(tr.cells.length);
        td.innerHTML = result[i].account_balance;
    }
}
    drawTable("userProfile");
}
</script>
<!--JS file for navigation top-->
<script src="navigation-top.js"></script>
</html>
